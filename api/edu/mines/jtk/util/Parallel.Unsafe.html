<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_60) on Mon Jun 02 09:06:02 MDT 2014 -->
<title>Parallel.Unsafe (Mines Java Toolkit)</title>
<meta name="date" content="2014-06-02">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Parallel.Unsafe (Mines Java Toolkit)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../edu/mines/jtk/util/Parallel.ReduceInt.html" title="interface in edu.mines.jtk.util"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../edu/mines/jtk/util/Parameter.html" title="class in edu.mines.jtk.util"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?edu/mines/jtk/util/Parallel.Unsafe.html" target="_top">Frames</a></li>
<li><a href="Parallel.Unsafe.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">edu.mines.jtk.util</div>
<h2 title="Class Parallel.Unsafe" class="title">Class Parallel.Unsafe&lt;T&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>edu.mines.jtk.util.Parallel.Unsafe&lt;T&gt;</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>Enclosing class:</dt>
<dd><a href="../../../../edu/mines/jtk/util/Parallel.html" title="class in edu.mines.jtk.util">Parallel</a></dd>
</dl>
<hr>
<br>
<pre>public static class <span class="strong">Parallel.Unsafe&lt;T&gt;</span>
extends java.lang.Object</pre>
<div class="block">A wrapper for objects that are not thread-safe. Such objects
 have methods that cannot safely be executed concurrently in 
 multiple threads. To use an unsafe object within a parallel 
 computation, first construct an instance of this wrapper. 
 Then, within the compute method, get the unsafe object; if 
 null, construct and set a new unsafe object in this wrapper, 
 before using the unsafe object to perform the computation. 
 This pattern ensures that each thread computes using a 
 distinct unsafe object. For example,
 <pre><code>
 final Parallel.Unsafe&lt;Worker&gt; nts = new Parallel.Unsafe&lt;Worker&gt;();
 Parallel.loop(count,new Parallel.LoopInt() {
   public void compute(int i) {
     Worker w = nts.get(); // get worker for the current thread
     if (w==null) nts.set(w=new Worker()); // if null, make one
     w.work(); // the method work need not be thread-safe
   }
 });
 </code></pre>
 This wrapper is most useful when (1) the cost of constructing an 
 unsafe object is high, relative to the cost of each call to compute, 
 and (2) the number of threads calling compute is significantly 
 lower than the total number of such calls. Otherwise, if either
 of these conditions is false, then simply construct a new unsafe 
 object within the compute method.
 <p>
 This wrapper works much like the Java standard class ThreadLocal,
 except that an object within this wrapper can be garbage-collected 
 before its thread dies. This difference is important because 
 fork-join worker threads are pooled and will typically die only 
 when a program ends.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../edu/mines/jtk/util/Parallel.Unsafe.html#Parallel.Unsafe()">Parallel.Unsafe</a></strong>()</code>
<div class="block">Constructs a wrapper for objects that are not thread-safe.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../edu/mines/jtk/util/Parallel.Unsafe.html" title="type parameter in Parallel.Unsafe">T</a></code></td>
<td class="colLast"><code><strong><a href="../../../../edu/mines/jtk/util/Parallel.Unsafe.html#get()">get</a></strong>()</code>
<div class="block">Gets the object in this wrapper for the current thread.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.Collection&lt;<a href="../../../../edu/mines/jtk/util/Parallel.Unsafe.html" title="type parameter in Parallel.Unsafe">T</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/mines/jtk/util/Parallel.Unsafe.html#getAll()">getAll</a></strong>()</code>
<div class="block">Returns a collection of all unsafe objects in this wrapper.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/mines/jtk/util/Parallel.Unsafe.html#set(T)">set</a></strong>(<a href="../../../../edu/mines/jtk/util/Parallel.Unsafe.html" title="type parameter in Parallel.Unsafe">T</a>&nbsp;object)</code>
<div class="block">Sets the object in this wrapper for the current thread.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Parallel.Unsafe()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Parallel.Unsafe</h4>
<pre>public&nbsp;Parallel.Unsafe()</pre>
<div class="block">Constructs a wrapper for objects that are not thread-safe.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="get()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>get</h4>
<pre>public&nbsp;<a href="../../../../edu/mines/jtk/util/Parallel.Unsafe.html" title="type parameter in Parallel.Unsafe">T</a>&nbsp;get()</pre>
<div class="block">Gets the object in this wrapper for the current thread.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the object; null, of not yet set for the current thread.</dd></dl>
</li>
</ul>
<a name="set(java.lang.Object)">
<!--   -->
</a><a name="set(T)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>set</h4>
<pre>public&nbsp;void&nbsp;set(<a href="../../../../edu/mines/jtk/util/Parallel.Unsafe.html" title="type parameter in Parallel.Unsafe">T</a>&nbsp;object)</pre>
<div class="block">Sets the object in this wrapper for the current thread.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>object</code> - the object.</dd></dl>
</li>
</ul>
<a name="getAll()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getAll</h4>
<pre>public&nbsp;java.util.Collection&lt;<a href="../../../../edu/mines/jtk/util/Parallel.Unsafe.html" title="type parameter in Parallel.Unsafe">T</a>&gt;&nbsp;getAll()</pre>
<div class="block">Returns a collection of all unsafe objects in this wrapper.
 This method is useful only after parallel loops have ended.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the collection of unsafe objects.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../edu/mines/jtk/util/Parallel.ReduceInt.html" title="interface in edu.mines.jtk.util"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../edu/mines/jtk/util/Parameter.html" title="class in edu.mines.jtk.util"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?edu/mines/jtk/util/Parallel.Unsafe.html" target="_top">Frames</a></li>
<li><a href="Parallel.Unsafe.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
